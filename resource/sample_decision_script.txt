for symbol in target_symbols:

    acquire_ratio = 0.8 / len(target_symbols)  # distribute by symbols count

    current_price = current_observed_data[str((symbol, "Close"))]

    indicator_key = str((symbol, "Price", "SMA One (#00BBFF)"))
    price_sma_one = current_indicators[indicator_key]
    indicator_key = str((symbol, "Price", "SMA Two (#FF6666)"))
    price_sma_two = current_indicators[indicator_key]

    wallet_balance = account_state["wallet_balance"]
    position_direction = account_state["positions"][symbol]["direction"]
    position_margin = account_state["positions"][symbol]["margin"]

    scribbles["remember_data"] = True  # remember something
    remember_data = scribbles.get("remember_data", False)  # retrieve it later

    if position_direction == "none":
        if price_sma_one > price_sma_two:
            decision[symbol]["now_buy"] = {
                "margin": acquire_ratio * wallet_balance,
            }
        elif price_sma_one < price_sma_two:
            decision[symbol]["now_sell"] = {
                "margin": acquire_ratio * wallet_balance,
            }

    elif position_direction == "long":
        if price_sma_one < price_sma_two:
            decision[symbol]["now_sell"] = {
                "margin":
                position_margin + acquire_ratio * wallet_balance,  # flip
            }

    elif position_direction == "short":
        if price_sma_one > price_sma_two:
            decision[symbol]["now_buy"] = {
                "margin":
                position_margin + acquire_ratio * wallet_balance,  # flip
            }
